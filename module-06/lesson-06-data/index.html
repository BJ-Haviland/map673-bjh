<!DOCTYPE html>
<html>
<head>
    <title>Louisiana Flooding Shelers - AUG 2016</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

    <link rel="stylesheet" href="http://libs.cartocdn.com/cartodb.js/v3/3.15/themes/css/cartodb.css" />
    
    <style>
      html, body, #map {
        height: 100%;
        padding: 0;
        margin: 0;
        background: #3d3d3d;
      }
    </style>
</head>
<body>
    
    <div id="map"></div>

    <script src="http://libs.cartocdn.com/cartodb.js/v3/3.15/cartodb.js"></script>
    <script>
        
        // instantiate our map
    var map = new L.Map("map", {
        center: [31.5,-92],  // note that the coordinates are back to lat/lon
        zoom: 7
    });

    var cartoCSS = '#sheltering_201608171200_100pct{'+
          'marker-fill-opacity: 0.7;'+
          'marker-line-color: #6B0FB2;'+
          'marker-line-width: 0.5;'+
          'marker-line-opacity: 0.7;'+
          'marker-placement: point;'+
          'marker-multi-policy: largest;'+
          'marker-type: ellipse;'+
          'marker-fill: #229A00;'+
          'marker-allow-overlap: true;'+
          'marker-clip: false;'+
          'marker-comp-op: src-over;'+
        '}';

    var sourceObject = {
        user_name: 'bj-haviland',
        type: 'cartodb',
        sublayers: [
            {
                sql: "SELECT * FROM sheltering_201608171200_100pct",
                cartocss: cartoCSS
            }  
        ]
    }

    cartodb.createLayer(map, sourceObject).addTo(map);
        
       /*
        // instantiate our map
        var map = new L.Map("map", {
            center: [30,-92],  // note the map is centered closer to 0,0
            zoom: 5.0
        });

        
        var url = 'https://bj-haviland.carto.com/api/v2/viz/6a0a8bae-eca0-11e5-8ba2-0e3ff518bd15/viz.json'
        
        cartodb.createLayer(map, url).addTo(map);
        */
        
        /*
        cartodb.createVis('map', url, {
            shareable: false, // removes the share link upper right of map
            title: true, // adds better title banner across the top,
            description: false,
            search: true, // doesn't work well when map has been projected
            zoom: 4, // sets initial zoom level
            cartodb_logo: false,
            layer_selector: true,
            fullscreen: false
        })
        
          .done(function(vis, layers) {
                console.log(vis, layers)
                console.log(vis.getLayers()); /// same as layers here
                console.log(vis.getOverlays()); /// same as layers here
                var sublayer = layers[1]; // reference to the layers

                console.log(layers[1].getSubLayerCount()) // the number of layers

                sublayer.setInteraction(true); // set the interaction true on the layers

                // retrieve specific information from various features of the layers
                sublayer.on('featureOver', function(e, latlng, pos, data) {
                console.log(e, latlng, pos, data);
                    
                });
                
                sublayer.setOpacity(.5); // change the opacity of the layers

               // sublayer.getSubLayer(2).hide();  // select a specific sublayer of the
                                            // layers and hide it

        

          });
          */
        
        

    </script>
</body>
</html>